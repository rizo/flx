(executable
 (name run)
 (libraries flx))

(rule
 (target basic.output)
 (deps
  (:run ./run.exe)
  (:input basic.test))
 (action
  (with-stdout-to
   %{target}
   (with-stdin-from
     %{input}
     (run ./%{run})))))

(rule
 (alias runtest)
 (action
  (diff basic.test basic.output)))

